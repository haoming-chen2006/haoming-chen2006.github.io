<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Haoming Chen</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="my-app/src/navbar.css">
  <link rel="stylesheet" href="my-app/src/main.css">
</head>
<body>
  <div id="root"></div>

  <!-- React and Babel from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script type="text/babel">
// Initialize Supabase
const { createClient } = supabase;
const supabaseClient = createClient(
  'https://ooumwohtgskpubglmaxz.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vdW13b2h0Z3NrcHViZ2xtYXh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MjA4NDksImV4cCI6MjA3MDA5Njg0OX0.ZBKCntpw-WTELCwTumIKXIAa7x1c1LOmGL_O5XtN4ro'
);

// Navbar component
const Navbar = ({ setPage }) => (
  <nav className="navbar">
    <div className="nav-section">
      <a href="mailto:haoming_chen@berkeley.edu" className="link-styles icon-link">
        <img src="/email_light.jpeg" alt="Email" className="nav-icon" />
      </a>
      <a href="https://github.com/haoming-chen2006" className="link-styles icon-link">
        <img src="/github.svg" alt="GitHub" className="nav-icon" />
      </a>
      <a href="https://linkedin.com/in/haoming-chen-7421b230b" className="link-styles icon-link">
        <img src="/linkedin.png" alt="LinkedIn" className="nav-icon" />
      </a>
    </div>
    <div className="nav-section">
      <button className="link-styles" onClick={() => setPage('about')}>about</button>
      <button className="link-styles" onClick={() => setPage('research')}>research</button>
      <button className="link-styles" onClick={() => setPage('experiences')}>experiences</button>
      <button className="link-styles-small" onClick={() => setPage('fun')}>fun</button>
    </div>
  </nav>
);

// Home component
const Home = ({ setPage }) => {
  // Form state for blog writing
  const [formData, setFormData] = React.useState({
    title: '',
    type: '',
    date: new Date().toISOString().split('T')[0], // Current date in YYYY-MM-DD format
    abstract: '',
    main: '',
  });
  const [blogs,setblogs] = React.useState([]);
  const [isSubmitting, setIsSubmitting] = React.useState(false);
  const [submitStatus, setSubmitStatus] = React.useState('');
  const [showForm, setShowForm] = React.useState(false);
  const [showPasswordPrompt, setShowPasswordPrompt] = React.useState(false);
  const [secretPhrase, setSecretPhrase] = React.useState('');
  const [isAuthenticated, setIsAuthenticated] = React.useState(false);
  // Handle form input changes
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  // Handle secret phrase submission
  const handleSecretPhrase = (e) => {
    e.preventDefault();
    if (secretPhrase.toLowerCase() === 'lailai') {
      setIsAuthenticated(true);
      setShowPasswordPrompt(false);
      setShowForm(true);
      setSecretPhrase('');
    } else {
      alert('Incorrect secret phrase. Access denied.');
      setSecretPhrase('');
    }
  };

  // Handle blog post button click
  const handleBlogPostClick = () => {
    if (showForm) {
      // If form is already open, close it
      setShowForm(false);
      setIsAuthenticated(false);
    } else if (isAuthenticated) {
      // If already authenticated, show form
      setShowForm(true);
    } else {
      // If not authenticated, show password prompt
      setShowPasswordPrompt(true);
    }
  };

  // Handle form submission
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    setSubmitStatus('');

    try {
      console.log('Submitting form data:', formData);
      
      // Insert into Supabase
      const { data, error } = await supabaseClient
        .from('Blogs')
        .insert([formData]);

      if (error) {
        console.error('Supabase error:', error);
        throw new Error(`Supabase error: ${error.message}`);
      }

      console.log('Successfully inserted:', data);
      setSubmitStatus('Success! Blog post saved to database.');
      
      // Refresh the blog list
      fetchBlogs();
      
      // Hide form after successful submission
      setShowForm(false);
      setIsAuthenticated(false);
      
      // Reset form
      setFormData({
        title: '',
        type: '',
        date: new Date().toISOString().split('T')[0], // Reset to current date
        abstract: '',
        main: ''
      });
    } catch (error) {
      console.error('Submission error:', error);
      setSubmitStatus(`Error: ${error.message}`);
    } finally {
      setIsSubmitting(false);
    }
  };

  const fetchBlogs = async() => {
    try {
      const {data, error} = await supabaseClient
        .from("Blogs")
        .select("*")
        .order("date", {ascending: false});
      
      if (error) {
        console.error('Error fetching blogs:', error);
      } else {
        setblogs(data);
      }
    } catch (error) {
      console.error('Error fetching blogs:', error);
    }
  }

  React.useEffect(() => {
    fetchBlogs();
  }, []);

  // Blog card component for displaying individual blogs
  const BlogCard = ({ blog }) => {
    const [isExpanded, setIsExpanded] = React.useState(false);
    
    return (
      <div 
        style={{
          border: '1px solid #e0e0e0',
          borderRadius: '8px',
          padding: '1.5rem',
          marginBottom: '1.5rem',
          backgroundColor: '#fff',
          cursor: 'pointer',
          transition: 'all 0.3s ease',
          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
        }}
        onClick={() => setIsExpanded(!isExpanded)}
        onMouseEnter={(e) => {
          e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
          e.target.style.transform = 'translateY(-2px)';
        }}
        onMouseLeave={(e) => {
          e.target.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
          e.target.style.transform = 'translateY(0)';
        }}
      >
        <h3 style={{ 
          margin: '0 0 0.5rem 0', 
          color: '#333', 
          fontSize: '1.4rem',
          fontWeight: 'bold'
        }}>
          {blog.title}
        </h3>
        
        <div style={{ 
          display: 'flex', 
          gap: '1rem', 
          marginBottom: '1rem',
          fontSize: '0.9rem',
          color: '#666'
        }}>
          <span style={{
            backgroundColor: '#f0f0f0',
            padding: '0.25rem 0.5rem',
            borderRadius: '4px',
            fontWeight: 'bold'
          }}>
            {blog.type}
          </span>
          <span>
            {new Date(blog.date).toLocaleDateString()}
          </span>
        </div>
        
        <p style={{ 
          margin: '0 0 1rem 0',
          lineHeight: '1.6',
          color: '#555'
        }}>
          {blog.abstract}
        </p>
        
        {isExpanded && (
          <div style={{
            borderTop: '1px solid #e0e0e0',
            paddingTop: '1rem',
            marginTop: '1rem'
          }}>
            <h4 style={{ color: '#333', marginBottom: '1rem' }}>Full Content:</h4>
            <div style={{
              whiteSpace: 'pre-line',
              lineHeight: '1.7',
              color: '#444',
              fontSize: '1rem'
            }}>
              {blog.main}
            </div>
          </div>
        )}
        
        <div style={{
          textAlign: 'right',
          marginTop: '1rem',
          fontSize: '0.9rem',
          color: '#888'
        }}>
          {isExpanded ? 'Click to collapse' : 'Click to read more'}
        </div>
      </div>
    );
  };

  return (
    <div className="main-content">
      <div className="hero-section">
        <div className="hero">
          <h1 className="subhead">Haoming Chen</h1>
          <p className="header"> I am a sophomore at UC Berkeley studying Computer Science and Mathematics.</p>
        </div>
        <div className="hero-image">
          <img src="/hero.jpg" alt="Haoming" />
        </div>
      </div>
      <div className="section blog">
        <h2>Bio</h2>
        <div className="bio-content-wrapper">
          <div className="bio-container">
            <p className='main-text'>
              Academically, I'm interested in  <b><span>how language models generalize to exciting fields</span></b>
                ,this involves things like vision language models and application of <b><span>machine learning in science</span></b>, especially physics.
              I am also passionate about <b><span>creative use of LLM agents</span></b> in gamified settings.
            </p>
            <p className='main-text'>
              I'm intested in <b><span>education inequality research</span></b> and <b><span>STEM outreach</span></b>.
            </p>
            <p className='main-text'>
              I am excited about cool sci-fi ideas and try my best to understand the frontier models we have to explain the world.
            </p>
            <p className='main-text'>
              I like to play soccer and support soccer teams, watch movies, and go on trips to amazing places. I am happy to talk about my very limited experience in ML and getting into research!
            </p>
            <p className='main-text'>
              Checkout my{' '}
              <span 
                className="bio-link" 
                onClick={() => setPage('research')}
                style={{
                  cursor: 'pointer',
                  color: '#007bff',
                  textDecoration: 'underline',
                  transition: 'all 0.3s ease'
                }}
                onMouseEnter={(e) => {
                  e.target.style.color = '#0056b3';
                  e.target.style.backgroundColor = '#f8f9fa';
                  e.target.style.padding = '0.2rem 0.4rem';
                  e.target.style.borderRadius = '4px';
                }}
                onMouseLeave={(e) => {
                  e.target.style.color = '#007bff';
                  e.target.style.backgroundColor = 'transparent';
                  e.target.style.padding = '0';
                  e.target.style.borderRadius = '0';
                }}
              >
                research projects
              </span>,{' '}
              <span 
                className="bio-link" 
                onClick={() => setPage('experiences')}
                style={{
                  cursor: 'pointer',
                  color: '#007bff',
                  textDecoration: 'underline',
                  transition: 'all 0.3s ease'
                }}
                onMouseEnter={(e) => {
                  e.target.style.color = '#0056b3';
                  e.target.style.backgroundColor = '#f8f9fa';
                  e.target.style.padding = '0.2rem 0.4rem';
                  e.target.style.borderRadius = '4px';
                }}
                onMouseLeave={(e) => {
                  e.target.style.color = '#007bff';
                  e.target.style.backgroundColor = 'transparent';
                  e.target.style.padding = '0';
                  e.target.style.borderRadius = '0';
                }}
              >
                experiences
              </span>{' and '}
              <span 
                className="bio-link" 
                onClick={() => setPage('fun')}
                style={{
                  cursor: 'pointer',
                  color: '#007bff',
                  textDecoration: 'underline',
                  transition: 'all 0.3s ease'
                }}
                onMouseEnter={(e) => {
                  e.target.style.color = '#0056b3';
                  e.target.style.backgroundColor = '#f8f9fa';
                  e.target.style.padding = '0.2rem 0.4rem';
                  e.target.style.borderRadius = '4px';
                }}
                onMouseLeave={(e) => {
                  e.target.style.color = '#007bff';
                  e.target.style.backgroundColor = 'transparent';
                  e.target.style.padding = '0';
                  e.target.style.borderRadius = '0';
                }}
              >
                fun stuff
              </span>
              !
            </p>
          </div>
        </div>
      </div>
      
      {/* Blog Display Section */}
      <div className="section blog">
        <h2>Published Blog Posts</h2>
        <div style={{ maxWidth: '800px', margin: '0 auto' }}>
          {blogs.length === 0 ? (
            <div style={{
              textAlign: 'center',
              padding: '2rem',
              color: '#666',
              fontStyle: 'italic'
            }}>
              No blog posts yet. Write your first one below!
            </div>
          ) : (
            blogs.map((blog) => (
              <BlogCard key={blog.id} blog={blog} />
            ))
          )}
        </div>
      </div>

      <div className="section blog">
        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
          <button
            onClick={handleBlogPostClick}
            style={{
              backgroundColor: showForm ? '#dc3545' : '#6c757d',
              color: 'white',
              padding: '1rem 2rem',
              border: 'none',
              borderRadius: '8px',
              fontSize: '1.1rem',
              fontWeight: 'bold',
              cursor: 'pointer',
              transition: 'all 0.3s ease',
              boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
            }}
            onMouseEnter={(e) => {
              e.target.style.transform = 'translateY(-2px)';
              e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
              if (!showForm) {
                e.target.style.backgroundColor = '#5a6268';
              }
            }}
            onMouseLeave={(e) => {
              e.target.style.transform = 'translateY(0)';
              e.target.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
              e.target.style.backgroundColor = showForm ? '#dc3545' : '#6c757d';
            }}
          >
            {showForm ? '✕ Close Form' : '✏️ Write a Blog Post'}
          </button>
        </div>

        {/* Secret Phrase Prompt */}
        {showPasswordPrompt && (
          <div style={{
            position: 'fixed',
            top: '0',
            left: '0',
            width: '100%',
            height: '100%',
            backgroundColor: 'rgba(0,0,0,0.5)',
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            zIndex: 1000
          }}>
            <div style={{
              backgroundColor: 'white',
              padding: '2rem',
              borderRadius: '8px',
              boxShadow: '0 4px 20px rgba(0,0,0,0.3)',
              maxWidth: '400px',
              width: '90%'
            }}>
              <h3 style={{ marginBottom: '1rem', textAlign: 'center' }}>Enter Secret Phrase</h3>
              <p style={{ marginBottom: '1.5rem', textAlign: 'center', color: '#666' }}>
                Please enter the secret phrase to access the blog writing form.
              </p>
              <form onSubmit={handleSecretPhrase}>
                <input
                  type="password"
                  value={secretPhrase}
                  onChange={(e) => setSecretPhrase(e.target.value)}
                  placeholder="Enter secret phrase..."
                  style={{
                    width: '100%',
                    padding: '0.75rem',
                    marginBottom: '1rem',
                    borderRadius: '4px',
                    border: '1px solid #ccc',
                    fontSize: '1rem'
                  }}
                  autoFocus
                />
                <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center' }}>
                  <button
                    type="submit"
                    style={{
                      backgroundColor: '#007bff',
                      color: 'white',
                      padding: '0.75rem 1.5rem',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      fontSize: '1rem'
                    }}
                  >
                    Submit
                  </button>
                  <button
                    type="button"
                    onClick={() => {
                      setShowPasswordPrompt(false);
                      setSecretPhrase('');
                    }}
                    style={{
                      backgroundColor: '#6c757d',
                      color: 'white',
                      padding: '0.75rem 1.5rem',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      fontSize: '1rem'
                    }}
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        )}

        {showForm && (
          <form onSubmit={handleSubmit} style={{
          maxWidth: '700px',
          margin: '2rem 0',
          padding: '2rem',
          border: '1px solid #ddd',
          borderRadius: '8px',
          backgroundColor: '#f9f9f9'
        }}>
          <div style={{ marginBottom: '1.5rem' }}>
            <label htmlFor="title" style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold' }}>
              Title:
            </label>
            <input
              type="text"
              id="title"
              name="title"
              value={formData.title}
              onChange={handleInputChange}
              required
              placeholder="Enter blog post title..."
              style={{
                width: '100%',
                padding: '0.75rem',
                borderRadius: '4px',
                border: '1px solid #ccc',
                fontSize: '1rem'
              }}
            />
          </div>

          <div style={{ marginBottom: '1.5rem' }}>
            <label htmlFor="type" style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold' }}>
              Type:
            </label>
            <select
              id="type"
              name="type"
              value={formData.type}
              onChange={handleInputChange}
              required
              style={{
                width: '100%',
                padding: '0.75rem',
                borderRadius: '4px',
                border: '1px solid #ccc',
                fontSize: '1rem'
              }}
            >
              <option value="">Select post type...</option>
              <option value="research">Research</option>
              <option value="technology">Technology</option>
              <option value="personal">Personal</option>
              <option value="tutorial">Tutorial</option>
              <option value="opinion">Opinion</option>
            </select>
          </div>

          <div style={{ marginBottom: '2rem' }}>
            <label htmlFor="abstract" style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold' }}>
              Abstract:
            </label>
            <textarea
              id="abstract"
              name="abstract"
              value={formData.abstract}
              onChange={handleInputChange}
              rows="4"
              required
              placeholder="Write a brief summary of your post..."
              style={{
                width: '100%',
                padding: '0.75rem',
                borderRadius: '4px',
                border: '1px solid #ccc',
                resize: 'vertical',
                fontSize: '1rem'
              }}
            />
          </div>

          <div style={{ marginBottom: '2rem' }}>
            <label htmlFor="main" style={{ display: 'block', marginBottom: '0.8rem', fontWeight: 'bold', fontSize: '1.1rem' }}>
              Main Content:
            </label>
            <textarea
              id="main"
              name="main"
              value={formData.main}
              onChange={handleInputChange}
              rows="15"
              required
              placeholder="Write your full blog post content here..."
              style={{
                width: '100%',
                padding: '1.2rem',
                borderRadius: '4px',
                border: '2px solid #007bff',
                resize: 'vertical',
                fontSize: '1rem',
                lineHeight: '1.6',
                fontFamily: 'Georgia, serif'
              }}
            />
          </div>

          <button
            type="submit"
            disabled={isSubmitting}
            style={{
              backgroundColor: isSubmitting ? '#ccc' : '#007bff',
              color: 'white',
              padding: '0.75rem 1.5rem',
              border: 'none',
              borderRadius: '4px',
              cursor: isSubmitting ? 'not-allowed' : 'pointer',
              fontSize: '1rem'
            }}
          >
            {isSubmitting ? 'Submitting...' : 'Publish Blog Post'}
          </button>
        </form>
        )}

        {submitStatus && (
          <div style={{
            padding: '1rem',
            marginTop: '1rem',
            borderRadius: '4px',
            backgroundColor: submitStatus.includes('Success') ? '#d4edda' : '#f8d7da',
            color: submitStatus.includes('Success') ? '#155724' : '#721c24',
            border: `1px solid ${submitStatus.includes('Success') ? '#c3e6cb' : '#f5c6cb'}`,
            maxWidth: '700px',
            margin: '1rem auto'
          }}>
            {submitStatus}
          </div>
        )}
      </div>
    </div>
  );
};

// Research components
const ResearchCard = ({ title, content, image, website, duration, role }) => {
  const [show, setShow] = React.useState(false);
  const handleCardClick = () => {
    if(show){ window.open(website, '_blank'); } else { setShow(true); }
  };
  if(!show){
    return (
      <div className="research-image-only" onClick={handleCardClick}>
        <img src={image} alt={title} />
        <div className="research-overlay">
          <h3>{title}</h3>
          <p>Click to see details</p>
        </div>
      </div>
    );
  }
  return (
    <div className="research-card">
      <div className="research-background-image">
        <img src={image} alt={title} />
      </div>
      <div className="research-content">
        <h3 className="research-title">{title}</h3>
        <p className="research-role">{role}</p>
        <p className="research-duration">{duration}</p>
        <div className="research-description">{content}</div>
        <div className="research-actions">
          <button className="research-link-btn" onClick={handleCardClick}>Visit Website →</button>
          <button className="research-close-btn" onClick={() => setShow(false)}>Close</button>
        </div>
      </div>
    </div>
  );
};

const Research = () => {
  const researchData = [
    {
      title: "Vilex encoder for VLM",
      role: "Researcher in BAIR, ATLAS group",
      content: (
        <div>
          <p>VILEX is an encoder that can work well in both <strong>visual generation and understanding tasks</strong> if integrated successfully with an autoregressive backbone. It has the potential to make text only model 'speak images' </p>

          <img src={"/Users/haoming/Desktop/haoming-chen2006.github.io/Screenshot 2025-09-07 at 14.54.35.png"} alt={"plot"} />
          <h4>What I built:</h4>
          <ul>
            <li>Custom dataloading pipelines</li>
            <li>Multilayer attention pooling tokenizer</li>
            <li>Adjustments of the BAGEL VLM model</li>
            <li>Experiments using augmented datasets</li>
          </ul>
          <p>Learn more about the project:<a href="https://github.com/haoming-chen2006/VILEX_BAGEL" style={{color: '#000', marginLeft: '5px'}}>VILEX for BAGEL</a></p>
          <p>Read relevant papers:<a href="https://arxiv.org/pdf/2412.06774" style={{color: '#000', marginLeft: '5px'}}></a></p>
        </div>
      ),
      duration: "June 2025 - Present",
      image: "vilex_poster.jpg",
      website: "https://github.com/haoming-chen2006/LLM4Tracking"
    },
    {
      title: "Language Model for High Energy Physics",
      role: "Research Intern under Lawrence Berkeley National Laboratory, ATLAS group",
      content: (
        <div>
          <p>The ambition of this project is to build a <strong>GPT-3 for particle physics data</strong> with zero-shot generalization capabilities. This revolutionary approach means we won't need to train separate models for each particle physics task.</p>
          <p>An example was to tokenize, reconstruct, and possibly understand the semantic meaning of complex particle traces, like the traces of Higgs Boson experiments showed below</p>
          <img src={"plot.png"} alt={"plot"} />
          <h4>What I built:</h4>
          <ul>
            <li>Custom dataloader for particle physics data</li>
            <li>Conditional Vectorized Quantized Autoencoders as tokenizers</li>
            <li>Integration into innovative language models</li>
            <li>Experiments using newest vision/language model techniques</li>
          </ul>
          <p>Read relevant papers:<a href="https://www.researchgate.net/publication/377919900_Generative_machine_learning_for_detector_response_modeling_with_a_conditional_normalizing_flow" style={{color: '#000', marginLeft: '5px'}}>Generative Machinee Learning</a><br/><a href="https://arxiv.org/abs/2403.05618">Omnijet Experiment</a></p>
          <p>Learn more about the tokenizers I made public:<a href="https://github.com/haoming-chen2006/LLM4Tracking" style={{color: '#000', marginLeft: '5px'}}>LLM for Jet and Particle Tokenization</a></p>
        </div>
      ),
      duration: "June 2025 - Present",
      image: "htobb.webp",
      website: "https://github.com/haoming-chen2006/LLM4Tracking"
    },
    {
      title: "Education and Organization Lab",
      role: "Research Apprentice, advised by professor Eos Trinidad",
      content: (
        <div>
          <p>Conducting research on trends about <strong>networks of nonprofits</strong> that focus on education.</p>
          <p>This URAP supported research program.</p>
          <h4>What I made:</h4>
          <ul>
            <li>250,000+ nonprofit dataset augmented with rich info added using webscraping </li>
            <li>Exploratory data analysis, machine learning, and outlier detection applied on the dataset</li>
            <li>Extensive literature review</li>
            <li>Production of interactive plots</li>
          </ul>
          <img src="web.jpg" alt="WeLeap AI Demo" style={{width: '100%', maxWidth: '400px', borderRadius: '8px', margin: '1rem 0'}} />
          <p>Read the book about the research:</p>
          <a href="https://www.amazon.com/Subtle-Webs-Local-Organizations-Education/dp/0197786081">Subtle webs</a>
        </div>
      ),
      duration: "May 2025 - Present",
      image: "network.jpg",
      website: "https://sites.google.com/view/eostrinidad/research"
    },
  ];

  return (
    <div className="main-content">
      <h2>Research Projects</h2>
      <div className="research-container">
        {researchData.map((research, index) => (
          <ResearchCard key={index} title={research.title} role={research.role} duration={research.duration} content={research.content} image={research.image} website={research.website} />
        ))}
      </div>
    </div>
  );
};

// Experiences components
const ExperienceCard = ({ title, description, image, website, duration, role }) => {
  const handleCardClick = () => { window.open(website, '_blank'); };
  return (
    <div className="experience-card" onClick={handleCardClick}>
      <div className="experience-image"><img src={image} alt={title} /></div>
      <div className="experience-content">
        <h3 className="experience-title">{title}</h3>
        <p className="experience-role">{role}</p>
        <p className="experience-duration">{duration}</p>
        <p className="experience-description">{description}</p>
        <div className="experience-link"><span>Click to visit →</span></div>
      </div>
    </div>
  );
};

const Experiences = () => {
  const experienceData = [
    { title: "WeLeap. AI", role: "Software Engineer Intern", duration: "June 2025 - Present", description: "Supported by Berkeley Skydeck startup incubator program. Orchestrated a multi-agent system to deliver personalized financial guidance using multimodal inputs such as documents, photos, and forms.", image: "/leap.jpg", website: "https://www.f6s.com/weleap" },
    { title: "CAL HACKS", role: "Participant", duration: "Julne 2023", description: "Had fun in the AI Hackathon, we built Kola coach, a wellness coach APP that gives phone calls, browse the web, and sends Email to users. Built at Cal Hack.", image: "/calhack.jpeg", website: "https://devpost.com/software/koacoach" },
    { title: "YC AI Startup School", role: "Participant", duration: "July 2025 ", description: "Joined the amazing YCombinator startup school event, listened to inspring talks from many of my heros, and had fun in after parties.", image: "/Y_comb.png", website: "https://events.ycombinator.com/ai-susm" },
    { title: "Berkeley CS C88C", role: "Course Staff", duration: "May 2025 - August 2026 ", description: "Helped organize Data C88C as UCS1 at Berkeley, organized teaching materials, instructed weekly sections, and hosted office hours for 400+ students.", image: "88.png", website: "https://c88c.org/su25/staff/" }
  ];
  return (
    <div className="main-content">
      <h2>Experiences</h2>
      <div className="experiences-container">
        {experienceData.map((experience, index) => (
          <ExperienceCard key={index} title={experience.title} role={experience.role} duration={experience.duration} description={experience.description} image={experience.image} website={experience.website} />
        ))}
      </div>
    </div>
  );
};

const Form = () => {
  // Destructure useState and useEffect from React
  const [formData, setFormData] = React.useState({
    title: '',
    type: '',
    date: new Date().toISOString().split('T')[0], // Current date in YYYY-MM-DD format
    abstract: '',
    main: '',
    });
  const [isSubmitting, setIsSubmitting] = React.useState(false);
  const [submitStatus, setSubmitStatus] = React.useState('');


  // Handle form input changes
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  // Handle form submission
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    setSubmitStatus('');

    try {
      console.log('Submitting form data:', formData);
      
      // Insert into Supabase
      const { data, error } = await supabaseClient
        .from('Blogs')
        .insert([formData]);

      if (error) {
        console.error('Supabase error:', error);
        throw new Error(`Supabase error: ${error.message}`);
      }

      console.log('Successfully inserted:', data);
      setSubmitStatus('Success! Blog post saved to database.');

      // Reset form
      setFormData({
        title: '',
        type: '',
        date: new Date().toISOString().split('T')[0], // Reset to current date
        abstract: '',
        main: ''
      });
    } catch (error) {
      console.error('Submission error:', error);
      setSubmitStatus(`Error: ${error.message}`);
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="main-content">
      <h2>Write a blog</h2>
      
      <form onSubmit={handleSubmit} style={{
        maxWidth: '700px',
        margin: '2rem 0',
        padding: '2rem',
        border: '1px solid #ddd',
        borderRadius: '8px',
        backgroundColor: '#f9f9f9'
      }}>
        <div style={{ marginBottom: '1.5rem' }}>
          <label htmlFor="title" style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold' }}>
            Title:
          </label>
          <input
            type="text"
            id="title"
            name="title"
            value={formData.title}
            onChange={handleInputChange}
            required
            placeholder="Enter blog post title..."
            style={{
              width: '100%',
              padding: '0.75rem',
              borderRadius: '4px',
              border: '1px solid #ccc',
              fontSize: '1rem'
            }}
          />
        </div>

        <div style={{ marginBottom: '1.5rem' }}>
          <label htmlFor="type" style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold' }}>
            Type:
          </label>
          <select
            id="type"
            name="type"
            value={formData.type}
            onChange={handleInputChange}
            required
            style={{
              width: '100%',
              padding: '0.75rem',
              borderRadius: '4px',
              border: '1px solid #ccc',
              fontSize: '1rem'
            }}
          >
            <option value="">Select post type...</option>
            <option value="research">Research</option>
            <option value="technology">Technology</option>
            <option value="personal">Personal</option>
            <option value="tutorial">Tutorial</option>
            <option value="opinion">Opinion</option>
          </select>
        </div>

        <div style={{ marginBottom: '2rem' }}>
          <label htmlFor="abstract" style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold' }}>
            Abstract:
          </label>
          <textarea
            id="abstract"
            name="abstract"
            value={formData.abstract}
            onChange={handleInputChange}
            rows="4"
            required
            placeholder="Write a brief summary of your post..."
            style={{
              width: '100%',
              padding: '0.75rem',
              borderRadius: '4px',
              border: '1px solid #ccc',
              resize: 'vertical',
              fontSize: '1rem'
            }}
          />
        </div>

        <div style={{ marginBottom: '2rem' }}>
          <label htmlFor="main" style={{ display: 'block', marginBottom: '0.8rem', fontWeight: 'bold', fontSize: '1.1rem' }}>
            Main Content:
          </label>
          <textarea
            id="main"
            name="main"
            value={formData.main}
            onChange={handleInputChange}
            rows="15"
            required
            placeholder="Write your full blog post content here..."
            style={{
              width: '100%',
              padding: '1.2rem',
              borderRadius: '4px',
              border: '2px solid #007bff',
              resize: 'vertical',
              fontSize: '1rem',
              lineHeight: '1.6',
              fontFamily: 'Georgia, serif'
            }}
          />
        </div>

        <button
          type="submit"
          disabled={isSubmitting}
          style={{
            backgroundColor: isSubmitting ? '#ccc' : '#007bff',
            color: 'white',
            padding: '0.75rem 1.5rem',
            border: 'none',
            borderRadius: '4px',
            cursor: isSubmitting ? 'not-allowed' : 'pointer',
            fontSize: '1rem'
          }}
        >
          {isSubmitting ? 'Submitting...' : 'Submit'}
        </button>
      </form>

      {submitStatus && (
        <div style={{
          padding: '1rem',
          marginTop: '1rem',
          borderRadius: '4px',
          backgroundColor: submitStatus.includes('Success') ? '#d4edda' : '#f8d7da',
          color: submitStatus.includes('Success') ? '#155724' : '#721c24',
          border: `1px solid ${submitStatus.includes('Success') ? '#c3e6cb' : '#f5c6cb'}`
        }}>
          {submitStatus}
        </div>
      )}

      <div style={{ marginTop: '2rem', padding: '1rem', backgroundColor: '#e9ecef', borderRadius: '4px' }}>
        <h3>Current Form Data (for debugging):</h3>
        <pre>{JSON.stringify(formData, null, 2)}</pre>
      </div>
    </div>
  );
};

function App(){
  const [page,setPage] = React.useState('about');
  let content;
  if(page==='about') content = <Home setPage={setPage}/>;
  else if(page==='research') content = <Research/>;
  else if(page==='experiences') content = <Experiences/>;
  else if(page==='fun') content = <Form/>;
  return (
    <div>
      <Navbar setPage={setPage}/>
      {content}
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
  </script>
</body>
</html>